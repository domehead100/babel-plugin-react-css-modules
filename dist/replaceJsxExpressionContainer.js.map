{"version":3,"sources":["../src/replaceJsxExpressionContainer.js"],"names":["t","path","styleNameAttribute","importedHelperIndentifier","styleModuleImportMapIdentifier","options","expressionContainerValue","value","classNameAttribute","node","openingElement","attributes","find","attribute","name","splice","indexOf","args","expression","handleMissingStyleName","push","styleNameExpression","callExpression","stringLiteral","Error"],"mappings":";;;;;;AACA;;;;AAaA;;;;AACA;;;;AACA;;;;;;kBAMe,CACbA,CADa,EAGbC,IAHa,EAIbC,kBAJa,EAKbC,yBALa,EAMbC,8BANa,EAObC,OAPa,KAQJ;AACT,QAAMC,2BAA2BJ,mBAAmBK,KAApD;AACA,QAAMC,qBAAqBP,KAAKQ,IAAL,CAAUC,cAAV,CAAyBC,UAAzB,CACxBC,IADwB,CAClBC,SAAD,IAAe;AACnB,WAAO,OAAOA,UAAUC,IAAjB,KAA0B,WAA1B,IAAyCD,UAAUC,IAAV,CAAeA,IAAf,KAAwB,WAAxE;AACD,GAHwB,CAA3B;;AAKA,MAAIN,kBAAJ,EAAwB;AACtBP,SAAKQ,IAAL,CAAUC,cAAV,CAAyBC,UAAzB,CAAoCI,MAApC,CAA2Cd,KAAKQ,IAAL,CAAUC,cAAV,CAAyBC,UAAzB,CAAoCK,OAApC,CAA4CR,kBAA5C,CAA3C,EAA4G,CAA5G;AACD;;AAEDP,OAAKQ,IAAL,CAAUC,cAAV,CAAyBC,UAAzB,CAAoCI,MAApC,CAA2Cd,KAAKQ,IAAL,CAAUC,cAAV,CAAyBC,UAAzB,CAAoCK,OAApC,CAA4Cd,kBAA5C,CAA3C,EAA4G,CAA5G;;AAEA,QAAMe,OAAO,CACXX,yBAAyBY,UADd,EAEXd,8BAFW,CAAb;;AAKA;AACA;AACA,MAAIC,QAAQc,sBAAR,KAAmC,0BAAgBA,sBAAvD,EAA+E;AAC7EF,SAAKG,IAAL,CAAU,sCAAuBpB,CAAvB,EAA0BK,OAA1B,CAAV;AACD;;AAED,QAAMgB,sBAAsBrB,EAAEsB,cAAF,CAC1BnB,yBAD0B,EAE1Bc,IAF0B,CAA5B;;AAKA,MAAIT,kBAAJ,EAAwB;AACtB,QAAI,iCAAgBA,mBAAmBD,KAAnC,CAAJ,EAA+C;AAC7CN,WAAKQ,IAAL,CAAUC,cAAV,CAAyBC,UAAzB,CAAoCS,IAApC,CAAyC,8BACvC,+BAAc,WAAd,CADuC,EAEvC,wCACE,kCACE,GADF,EAEEpB,EAAEuB,aAAF,CAAgBf,mBAAmBD,KAAnB,CAAyBA,KAAzB,GAAiC,GAAjD,CAFF,EAGEc,mBAHF,CADF,CAFuC,CAAzC;AAUD,KAXD,MAWO,IAAI,0CAAyBb,mBAAmBD,KAA5C,CAAJ,EAAwD;AAC7DN,WAAKQ,IAAL,CAAUC,cAAV,CAAyBC,UAAzB,CAAoCS,IAApC,CAAyC,8BACvC,+BAAc,WAAd,CADuC,EAEvC,wCACE,qCACEZ,mBAAmBD,KAAnB,CAAyBW,UAD3B,EAEEG,mBAFF,CADF,CAFuC,CAAzC;AASD,KAVM,MAUA;AACL,YAAM,IAAIG,KAAJ,CAAU,6BAAV,CAAN;AACD;AACF,GAzBD,MAyBO;AACLvB,SAAKQ,IAAL,CAAUC,cAAV,CAAyBC,UAAzB,CAAoCS,IAApC,CAAyC,8BACvC,+BAAc,WAAd,CADuC,EAEvC,wCACEC,mBADF,CAFuC,CAAzC;AAMD;AACF,C","file":"replaceJsxExpressionContainer.js","sourcesContent":["// @flow\r\nimport BabelTypes, {\r\n  binaryExpression,\r\n  Identifier,\r\n  isJSXExpressionContainer,\r\n  isStringLiteral,\r\n  jSXAttribute,\r\n  JSXAttribute,\r\n  jSXExpressionContainer,\r\n  jSXIdentifier\r\n} from 'babel-types';\r\nimport type {\r\n  HandleMissingStyleNameOptionType\r\n} from './types';\r\nimport conditionalClassMerge from './conditionalClassMerge';\r\nimport createObjectExpression from './createObjectExpression';\r\nimport optionsDefaults from './schemas/optionsDefaults';\r\n\r\ntype OptionsType = {|\r\n  handleMissingStyleName: HandleMissingStyleNameOptionType\r\n|};\r\n\r\nexport default (\r\n  t: BabelTypes,\r\n  // eslint-disable-next-line flowtype/no-weak-types\r\n  path: Object,\r\n  styleNameAttribute: JSXAttribute,\r\n  importedHelperIndentifier: Identifier,\r\n  styleModuleImportMapIdentifier: Identifier,\r\n  options: OptionsType\r\n): void => {\r\n  const expressionContainerValue = styleNameAttribute.value;\r\n  const classNameAttribute = path.node.openingElement.attributes\r\n    .find((attribute) => {\r\n      return typeof attribute.name !== 'undefined' && attribute.name.name === 'className';\r\n    });\r\n\r\n  if (classNameAttribute) {\r\n    path.node.openingElement.attributes.splice(path.node.openingElement.attributes.indexOf(classNameAttribute), 1);\r\n  }\r\n\r\n  path.node.openingElement.attributes.splice(path.node.openingElement.attributes.indexOf(styleNameAttribute), 1);\r\n\r\n  const args = [\r\n    expressionContainerValue.expression,\r\n    styleModuleImportMapIdentifier\r\n  ];\r\n\r\n  // Only provide options argument if the options are something other than default\r\n  // This helps save a few bits in the generated user code\r\n  if (options.handleMissingStyleName !== optionsDefaults.handleMissingStyleName) {\r\n    args.push(createObjectExpression(t, options));\r\n  }\r\n\r\n  const styleNameExpression = t.callExpression(\r\n    importedHelperIndentifier,\r\n    args\r\n  );\r\n\r\n  if (classNameAttribute) {\r\n    if (isStringLiteral(classNameAttribute.value)) {\r\n      path.node.openingElement.attributes.push(jSXAttribute(\r\n        jSXIdentifier('className'),\r\n        jSXExpressionContainer(\r\n          binaryExpression(\r\n            '+',\r\n            t.stringLiteral(classNameAttribute.value.value + ' '),\r\n            styleNameExpression\r\n          )\r\n        )\r\n      ));\r\n    } else if (isJSXExpressionContainer(classNameAttribute.value)) {\r\n      path.node.openingElement.attributes.push(jSXAttribute(\r\n        jSXIdentifier('className'),\r\n        jSXExpressionContainer(\r\n          conditionalClassMerge(\r\n            classNameAttribute.value.expression,\r\n            styleNameExpression\r\n          )\r\n        )\r\n      ));\r\n    } else {\r\n      throw new Error('Unexpected attribute value.');\r\n    }\r\n  } else {\r\n    path.node.openingElement.attributes.push(jSXAttribute(\r\n      jSXIdentifier('className'),\r\n      jSXExpressionContainer(\r\n        styleNameExpression\r\n      )\r\n    ));\r\n  }\r\n};\r\n"]}